Config:
apt-get install libreswan


/etc/ipsec.conf
config setup
        protostack=netkey
        # Normally, pluto logs via syslog.
        #logfile=/var/log/pluto.log
        #
        # Do not enable debug options to debug configuration issues!
        #
        # plutodebug="control parsing"
        # plutodebug="all crypt"
        plutodebug=none
        #
        # NAT-TRAVERSAL support
        # exclude networks used on server side by adding %v4:!a.b.c.0/24
        # It seems that T-Mobile in the US and Rogers/Fido in Canada are
        # using 25/8 as "private" address space on their wireless networks.
        # This range has never been announced via BGP (at least up to 2015)
        virtual_private=%v4:10.0.0.0/8,%v4:192.168.0.0/16,%v4:172.16.25.0/24,%v4:25.0.0.0/8,%v4:100.64.0.0/10,%v6:fd00::/8,%v6:fe80::/10
#       nat_traversal=yes

# if it exists, include system wide crypto-policy defaults
# include /etc/crypto-policies/back-ends/libreswan.config

# It is best to add your IPsec connections as separate files in /etc/ipsec.d/
include /etc/ipsec.d/*.conf


/etc/ipsec.d/<name>.conf
conn <name>
        authby=secret
        type=tunnel
        auto=start
        left=%defaultroute
        leftsourceip=<IP_OF_AWS_SERVER>
        leftid=DefaultL2LGroup(Clients_VPN_Groupname)
        right=<Public_IP_Of_VPN>
        rightid=<IP_of_Outside_Interface_on_VPN_Concentrator>  #Logs may tell you correct value if it is wrong
        rightsubnet=<Network_Inside_CLient_To_Communicate_With>/16
        rightsourceip=<IP_of_Outside_Interface_on_VPN_Concentrator>
        ike=3des-md5;modp1024 #Probably needs changed
        phase2=esp
        phase2alg=aes128-md5;modp2048 #Probably needs changed
        pfs=no
        
        
 /etc/ipsec.d/<name>.secrets
 DefaultL2LGroup(Clients_VPN_Groupname) <IP_of_Outside_Interface_on_VPN_Concentrator>:  PSK "<some_PSK_from_VPN_config"
 
 
 Useful commands:
 ipsec setup start
 ipsec setup stop
 ipsec whack --listen
 ipsec auto --add <name>
 ipsec auto --up <name> (this is case sensitive to the value of <name> after "conn " in the <name>.conf file
